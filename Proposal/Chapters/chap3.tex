\chapter{研究内容与技术路线}

\section{研究内容}

该课题主要包含两个子课题，一个是行人重识别，一个是跨摄像头多目标跟踪。

对于行人重识别问题，主要研究思路为从单帧图像向跟踪序列发展，从高质量图像向实际干扰很多的图像发展。
对于单帧图像的行人重识别方法，核心目标在于在目前已有的公开行人ReID数据集上取得State-of-the-arts，甚至超越人类准确度的结果。
为了达到这个目标，需要研究以下内容：
\begin{enumerate}
  \item 得到更好的图像特征表达。无论是基于表征学习还是度量学习的方法，其本质目标就在于如何让网络学习到一个更加鲁邦的特征，来提高行人重识别的准确度，所以设计一个好的学习模型是最核心的研究内容。
  \item 考虑全局特征和局部特征。目前的大量研究工作表明，只考虑全局特征对于行人重识别来说并不足以取得令人惊喜的结果。因为全局特征可以解决大部分的情况，但是在一些外观相似的情况，只能依靠局部的细节来区分。因此联合全局特征和局部特征是进一步提高行人重识别准确度的重要手段。
  \item 多模型的联合与集成。单模型所能取得的性能终究是有限，多个模型集成是提高准确度的一种通用手段，所以在单模型遇到瓶颈的情况下，多模型的研究可以是另外一条继续提升的方法。
  \item 室内行人重识别。目前所有的ReID数据集都是远距离拍摄的视频数据，这种数据的特点是图片中行人结构比较完整，基本都是全身照。但是在室内场景下由于摄像头视角的原因，存在着很多半身以及遮挡的情况，如何做好半身以及遮挡图片与全身图片的匹配也是一个值得研究的内容。
  \item 基于序列的行人重识别。基于跟踪序列的ReID模型对于MTMC任务是有直接的贡献，因为MTMC的本质核心就是把几个跟踪序列给匹配关联起来。
\end{enumerate}

对于跨摄像头多目标跟踪问题，主要研究思路为以ReID作为最主要的外观特征，辅之以相关滤波、时空关联等数据关联技术；借助已有的单摄像头单目标的跟踪技术，加入ReID特征改进为多目标跟踪技术。
最终能够得到一个可以实用的跨摄像头多目标跟踪系统，并在DukeMTMC等数据集上取得State-of-the-arts的结果。
为了达到这个目标，需要研究一下内容：

\begin{enumerate}

\item 多目标的匹配关联。单目标跟踪只需要关注当前跟踪的目标，不会出现大范围的目标突变。然而多目标需要关注所有的跟踪目标，首先最直接的一点就是如何把不同时刻的多个目标关联起来。

\item 多目标错匹配的找回。单目标跟踪一般不会出现目标匹配混乱的问题，最多也就是当前目标在一些情况下丢失了。但是多目标跟踪可能由于多个目标的位置重叠等原因，导致目标丢失甚至匹配互换，如何研究一个合理的机制在目标错匹配的情况下再重新联结回来是一个值得研究的内容。

\item 时空数据关联。只用ReID技术当然足以完成多目标跟踪任务，但是并不能保证ReID技术已经足以保证多目标跟踪的实际需求。在一些ReID失效的情况下，利用相关滤波以及时空关联技术，是进一步提升跟踪器性能的思路。

\item 跨摄像头的目标匹配。跨摄像头的目标匹配是MTMC和其他跟踪任务最不一样的地方，这是在目标一定丢失并且可能不再出现的先验条件下重新找回目标的任务，因此是一个非常有挑战的任务，也是MTMC任务必须解决的一个问题。

\item 室内跨摄像头多目标跟踪数据集。目前MTMC相关的数据集很少，仅存的几个数据集也是校园采集的室外场景。随着无人超市、无人商场等应用需求的提升，一个室内MTMC的数据集能够非常好的促进相关技术的研究与落地。

\end{enumerate}

\section{技术路线}

\subsection{基于深度学习的行人重识别技术}

深度学习已经取代传统的视觉方法成为行人重识别领域的必用方法。
训练一个行人重识别的深度学习模型包括数据处理、网络模型设计、损失函数设计、模型训练、特征提取以及图像检索等环节。

数据处理包括数据预处理和数据增广，数据预处理是指把图片的尺寸和内容等归一化到一个统一的尺寸，数据增广是为了防止过拟合而把一张图像增广到多张图像，典型的技术包括翻转、模糊、平移、裁剪以及光照变化等等。
之后是为了满足特定任务设计一个提取特征的卷积网络，可以采用一些预训练好的卷积网络，例如ResNet、GoogleNet等，也可以根据需求自定义网络，比如为了提取不同尺寸规模的特征可以融合不同层次的feature maps。
设计合适的损失函数有利于网络收敛到一个更合理的最优点，表征学习和度量学习的思路不同使得其损失函数的设计思路不同，但最终的目的都是为了训练处一个泛化能力很好的卷积网络。
前面的工作完成了就可以训练网络，深度学习都是基于梯度下降算法训练模型，因此需要设计好合适的学习率和优化器，使得网络能够更快更好的收敛。
训练好了一个网络模型之后，我们需要利用这个模型来完成行人重识别任务，总共包括两个环节，而特征提取是第一个环节，利用已经训练的网络模型，对于每一张图像我们都能提取至少一个特征，这个特征包含了图像的全局或者局部内容特征。
特征提取之后是检索环节，对于每一张图像模型都能提取一个特征，之后利用这些特征计算两幅图像之间的相似性，可以用最简单的欧式距离来计算，也可以用一些更加鲁邦的检索方法来实现相似度排序。

\subsection{基于行人重识别特征的跨摄像头多目标跟踪技术}

跨摄像头多目标跟踪问题的技术路线预计包括：数据处理、行人检测、特征提取、数据关联等。
数据处理主要是指把公开数据集的原始视频数据根据标注文件进行合理的处理，得到一个比较方便的数据流接口。
行人检测是指利用行人检测的深度学习模型得到图像中的行人检测框和对应的检测置信度，由于本课题不关注行人检测的相关研究，所以这个环节将使用开源的行人检测模型。
特征提取是指提取检测框图片的表观特征，在本课题中重点是指行人ReID特征。
数据关联既包括单摄像头的跟踪轨迹关联，也包括跨摄像头间的轨迹关联。
对于单摄像头，目前已经有一些可以参考的方法，将会优先选择复现这些算法，然后把ReID特征作为表观特征或者观测模型引入到这些方法之中。
而对于跨摄像头，将把ReID特征作为一个核心特征来研究数据关联方法。
